{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useParams,useNavigate}from'react-router-dom';import{diagrams,chat,auth}from'../api';import Canvas from'./Canvas';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DiagramEditor=()=>{const{id}=useParams();const navigate=useNavigate();const[activeTool,setActiveTool]=useState('pen');const[user,setUser]=useState(null);useEffect(()=>{if(!auth.isAuthenticated()){navigate('/');return;}const currentUser=auth.getUser();setUser(currentUser);},[navigate]);const handleLogout=async()=>{await auth.logout();navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-white\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex items-center justify-between px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/diagrams\",className:\"text-blue-600 hover:text-blue-800\",children:\"\\u2190 Back to Diagrams\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-800\",children:\"Diagram Editor\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[\"Welcome, \",user.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600\",children:\"Logout\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4 px-6 py-3 bg-gray-50 border-b border-gray-200\",children:['pen','rect','circle','line','text','select'].map(tool=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTool(tool),className:\"px-3 py-2 text-sm font-medium rounded \".concat(activeTool===tool?'bg-blue-500 text-white':'bg-white text-gray-700 hover:bg-gray-100'),children:tool.charAt(0).toUpperCase()+tool.slice(1)},tool))}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-6\",children:/*#__PURE__*/_jsx(Canvas,{activeTool:activeTool,diagramId:id})})]});};export default DiagramEditor;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","diagrams","chat","auth","Canvas","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DiagramEditor","id","navigate","activeTool","setActiveTool","user","setUser","isAuthenticated","currentUser","getUser","handleLogout","logout","className","children","to","username","onClick","map","tool","concat","charAt","toUpperCase","slice","diagramId"],"sources":["/workspaces/codespaces-blank/frontend/src/components/DiagramEditor.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { diagrams, chat, auth } from '../api';\nimport Canvas from './Canvas';\n\nconst DiagramEditor = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [activeTool, setActiveTool] = useState('pen');\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    if (!auth.isAuthenticated()) {\n      navigate('/');\n      return;\n    }\n    const currentUser = auth.getUser();\n    setUser(currentUser);\n  }, [navigate]);\n\n  const handleLogout = async () => {\n    await auth.logout();\n    navigate('/');\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-white\">\n      <header className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200\">\n        <div className=\"flex items-center gap-4\">\n          <Link to=\"/diagrams\" className=\"text-blue-600 hover:text-blue-800\">\n            ‚Üê Back to Diagrams\n          </Link>\n          <h1 className=\"text-xl font-bold text-gray-800\">Diagram Editor</h1>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {user && (\n            <>\n              <span className=\"text-sm text-gray-600\">Welcome, {user.username}</span>\n              <button\n                onClick={handleLogout}\n                className=\"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600\"\n              >\n                Logout\n              </button>\n            </>\n          )}\n        </div>\n      </header>\n\n      <div className=\"flex items-center gap-4 px-6 py-3 bg-gray-50 border-b border-gray-200\">\n        {['pen', 'rect', 'circle', 'line', 'text', 'select'].map((tool) => (\n          <button\n            key={tool}\n            onClick={() => setActiveTool(tool)}\n            className={`px-3 py-2 text-sm font-medium rounded ${\n              activeTool === tool \n                ? 'bg-blue-500 text-white' \n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            {tool.charAt(0).toUpperCase() + tool.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"flex-1 p-6\">\n        <Canvas activeTool={activeTool} diagramId={id} />\n      </div>\n    </div>\n  );\n};\n\nexport default DiagramEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}