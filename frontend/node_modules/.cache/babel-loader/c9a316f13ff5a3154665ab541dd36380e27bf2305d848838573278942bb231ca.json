{"ast":null,"code":"import React,{useRef,useState,useEffect,useCallback}from'react';import api from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CANVAS_WIDTH=800;const CANVAS_HEIGHT=600;const TOOLS={PEN:'pen',LINE:'line',RECT:'rect',CIRCLE:'circle',TEXT:'text',SELECT:'select'};function drawLine(ctx,x0,y0,x1,y1){let color=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'#000';let width=arguments.length>6&&arguments[6]!==undefined?arguments[6]:2;ctx.save();ctx.strokeStyle=color;ctx.lineWidth=width;ctx.lineCap='round';ctx.beginPath();ctx.moveTo(x0,y0);ctx.lineTo(x1,y1);ctx.stroke();ctx.restore();}function drawRect(ctx,x0,y0,x1,y1){let color=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'#000';let width=arguments.length>6&&arguments[6]!==undefined?arguments[6]:2;ctx.save();ctx.strokeStyle=color;ctx.lineWidth=width;ctx.strokeRect(x0,y0,x1-x0,y1-y0);ctx.restore();}function drawCircle(ctx,cx,cy,r){let color=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'#000';let width=arguments.length>5&&arguments[5]!==undefined?arguments[5]:2;ctx.save();ctx.strokeStyle=color;ctx.lineWidth=width;ctx.beginPath();ctx.arc(cx,cy,r,0,2*Math.PI);ctx.stroke();ctx.restore();}const Canvas=_ref=>{let{activeTool='pen',diagramId}=_ref;const canvasRef=useRef(null);const[drawing,setDrawing]=useState(false);const[start,setStart]=useState(null);const[history,setHistory]=useState([]);const[currentStroke,setCurrentStroke]=useState([]);const[color,setColor]=useState('#000000');const[lineWidth,setLineWidth]=useState(2);const redraw=useCallback(()=>{const canvas=canvasRef.current;if(!canvas)return;const ctx=canvas.getContext('2d');ctx.clearRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);// Draw white background\nctx.fillStyle='white';ctx.fillRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);// Draw all elements\nhistory.forEach(item=>{if(item.tool===TOOLS.PEN){for(let i=1;i<item.points.length;i++){drawLine(ctx,item.points[i-1].x,item.points[i-1].y,item.points[i].x,item.points[i].y,item.color,item.width);}}else if(item.tool===TOOLS.LINE){const[p0,p1]=item.points;drawLine(ctx,p0.x,p0.y,p1.x,p1.y,item.color,item.width);}else if(item.tool===TOOLS.RECT){const[p0,p1]=item.points;drawRect(ctx,p0.x,p0.y,p1.x,p1.y,item.color,item.width);}else if(item.tool===TOOLS.CIRCLE){if(item.center&&item.radius){drawCircle(ctx,item.center.x,item.center.y,item.radius,item.color,item.width);}}});},[history]);useEffect(()=>{redraw();},[redraw]);const getMousePos=e=>{const rect=canvasRef.current.getBoundingClientRect();return{x:e.clientX-rect.left,y:e.clientY-rect.top};};const handlePointerDown=e=>{const{x,y}=getMousePos(e);setDrawing(true);setStart({x,y});if(activeTool===TOOLS.PEN){setCurrentStroke([{x,y}]);}};const handlePointerMove=e=>{if(!drawing)return;const{x,y}=getMousePos(e);if(activeTool===TOOLS.PEN){setCurrentStroke(prev=>[...prev,{x,y}]);const ctx=canvasRef.current.getContext('2d');if(currentStroke.length>0){const lastPoint=currentStroke[currentStroke.length-1];drawLine(ctx,lastPoint.x,lastPoint.y,x,y,color,lineWidth);}}else{// Preview shape\nredraw();const ctx=canvasRef.current.getContext('2d');if(activeTool===TOOLS.LINE&&start){drawLine(ctx,start.x,start.y,x,y,color,lineWidth);}else if(activeTool===TOOLS.RECT&&start){drawRect(ctx,start.x,start.y,x,y,color,lineWidth);}else if(activeTool===TOOLS.CIRCLE&&start){const radius=Math.hypot(x-start.x,y-start.y);drawCircle(ctx,start.x,start.y,radius,color,lineWidth);}}};const handlePointerUp=e=>{if(!drawing)return;setDrawing(false);const{x,y}=getMousePos(e);let element=null;if(activeTool===TOOLS.PEN){element={tool:TOOLS.PEN,points:[...currentStroke,{x,y}],color,width:lineWidth};setCurrentStroke([]);}else if(activeTool===TOOLS.LINE){element={tool:TOOLS.LINE,points:[start,{x,y}],color,width:lineWidth};}else if(activeTool===TOOLS.RECT){element={tool:TOOLS.RECT,points:[start,{x,y}],color,width:lineWidth};}else if(activeTool===TOOLS.CIRCLE){const radius=Math.hypot(x-start.x,y-start.y);element={tool:TOOLS.CIRCLE,center:start,radius,color,width:lineWidth};}if(element){setHistory(prev=>[...prev,element]);}setStart(null);};const handleUndo=()=>{setHistory(prev=>prev.slice(0,-1));};const handleClear=()=>{setHistory([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full bg-gray-100 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex gap-4 items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>setColor(e.target.value),className:\"w-10 h-10 border-none rounded cursor-pointer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"20\",value:lineWidth,onChange:e=>setLineWidth(Number(e.target.value)),className:\"w-20\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUndo,disabled:history.length===0,className:\"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50\",children:\"Undo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClear,className:\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600\",children:\"Clear\"})]}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,width:CANVAS_WIDTH,height:CANVAS_HEIGHT,className:\"border border-gray-300 bg-white cursor-crosshair\",onPointerDown:handlePointerDown,onPointerMove:handlePointerMove,onPointerUp:handlePointerUp,onPointerLeave:handlePointerUp})]});};export default Canvas;","map":{"version":3,"names":["React","useRef","useState","useEffect","useCallback","api","jsx","_jsx","jsxs","_jsxs","CANVAS_WIDTH","CANVAS_HEIGHT","TOOLS","PEN","LINE","RECT","CIRCLE","TEXT","SELECT","drawLine","ctx","x0","y0","x1","y1","color","arguments","length","undefined","width","save","strokeStyle","lineWidth","lineCap","beginPath","moveTo","lineTo","stroke","restore","drawRect","strokeRect","drawCircle","cx","cy","r","arc","Math","PI","Canvas","_ref","activeTool","diagramId","canvasRef","drawing","setDrawing","start","setStart","history","setHistory","currentStroke","setCurrentStroke","setColor","setLineWidth","redraw","canvas","current","getContext","clearRect","fillStyle","fillRect","forEach","item","tool","i","points","x","y","p0","p1","center","radius","getMousePos","e","rect","getBoundingClientRect","clientX","left","clientY","top","handlePointerDown","handlePointerMove","prev","lastPoint","hypot","handlePointerUp","element","handleUndo","slice","handleClear","className","children","type","value","onChange","target","min","max","Number","onClick","disabled","ref","height","onPointerDown","onPointerMove","onPointerUp","onPointerLeave"],"sources":["/workspaces/codespaces-blank/frontend/src/components/Canvas.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect, useCallback } from 'react';\nimport api from '../api';\n\nconst CANVAS_WIDTH = 800;\nconst CANVAS_HEIGHT = 600;\n\nconst TOOLS = {\n  PEN: 'pen',\n  LINE: 'line',\n  RECT: 'rect',\n  CIRCLE: 'circle',\n  TEXT: 'text',\n  SELECT: 'select'\n};\n\nfunction drawLine(ctx, x0, y0, x1, y1, color = '#000', width = 2) {\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.lineCap = 'round';\n  ctx.beginPath();\n  ctx.moveTo(x0, y0);\n  ctx.lineTo(x1, y1);\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction drawRect(ctx, x0, y0, x1, y1, color = '#000', width = 2) {\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.strokeRect(x0, y0, x1 - x0, y1 - y0);\n  ctx.restore();\n}\n\nfunction drawCircle(ctx, cx, cy, r, color = '#000', width = 2) {\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.arc(cx, cy, r, 0, 2 * Math.PI);\n  ctx.stroke();\n  ctx.restore();\n}\n\nconst Canvas = ({ activeTool = 'pen', diagramId }) => {\n  const canvasRef = useRef(null);\n  const [drawing, setDrawing] = useState(false);\n  const [start, setStart] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [currentStroke, setCurrentStroke] = useState([]);\n  const [color, setColor] = useState('#000000');\n  const [lineWidth, setLineWidth] = useState(2);\n\n  const redraw = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    \n    // Draw white background\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    \n    // Draw all elements\n    history.forEach((item) => {\n      if (item.tool === TOOLS.PEN) {\n        for (let i = 1; i < item.points.length; i++) {\n          drawLine(ctx, \n            item.points[i-1].x, item.points[i-1].y,\n            item.points[i].x, item.points[i].y,\n            item.color, item.width\n          );\n        }\n      } else if (item.tool === TOOLS.LINE) {\n        const [p0, p1] = item.points;\n        drawLine(ctx, p0.x, p0.y, p1.x, p1.y, item.color, item.width);\n      } else if (item.tool === TOOLS.RECT) {\n        const [p0, p1] = item.points;\n        drawRect(ctx, p0.x, p0.y, p1.x, p1.y, item.color, item.width);\n      } else if (item.tool === TOOLS.CIRCLE) {\n        if (item.center && item.radius) {\n          drawCircle(ctx, item.center.x, item.center.y, item.radius, item.color, item.width);\n        }\n      }\n    });\n  }, [history]);\n\n  useEffect(() => {\n    redraw();\n  }, [redraw]);\n\n  const getMousePos = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    return {\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    };\n  };\n\n  const handlePointerDown = (e) => {\n    const { x, y } = getMousePos(e);\n    setDrawing(true);\n    setStart({ x, y });\n    \n    if (activeTool === TOOLS.PEN) {\n      setCurrentStroke([{ x, y }]);\n    }\n  };\n\n  const handlePointerMove = (e) => {\n    if (!drawing) return;\n    \n    const { x, y } = getMousePos(e);\n    \n    if (activeTool === TOOLS.PEN) {\n      setCurrentStroke(prev => [...prev, { x, y }]);\n      const ctx = canvasRef.current.getContext('2d');\n      if (currentStroke.length > 0) {\n        const lastPoint = currentStroke[currentStroke.length - 1];\n        drawLine(ctx, lastPoint.x, lastPoint.y, x, y, color, lineWidth);\n      }\n    } else {\n      // Preview shape\n      redraw();\n      const ctx = canvasRef.current.getContext('2d');\n      \n      if (activeTool === TOOLS.LINE && start) {\n        drawLine(ctx, start.x, start.y, x, y, color, lineWidth);\n      } else if (activeTool === TOOLS.RECT && start) {\n        drawRect(ctx, start.x, start.y, x, y, color, lineWidth);\n      } else if (activeTool === TOOLS.CIRCLE && start) {\n        const radius = Math.hypot(x - start.x, y - start.y);\n        drawCircle(ctx, start.x, start.y, radius, color, lineWidth);\n      }\n    }\n  };\n\n  const handlePointerUp = (e) => {\n    if (!drawing) return;\n    setDrawing(false);\n    \n    const { x, y } = getMousePos(e);\n    let element = null;\n    \n    if (activeTool === TOOLS.PEN) {\n      element = {\n        tool: TOOLS.PEN,\n        points: [...currentStroke, { x, y }],\n        color,\n        width: lineWidth\n      };\n      setCurrentStroke([]);\n    } else if (activeTool === TOOLS.LINE) {\n      element = {\n        tool: TOOLS.LINE,\n        points: [start, { x, y }],\n        color,\n        width: lineWidth\n      };\n    } else if (activeTool === TOOLS.RECT) {\n      element = {\n        tool: TOOLS.RECT,\n        points: [start, { x, y }],\n        color,\n        width: lineWidth\n      };\n    } else if (activeTool === TOOLS.CIRCLE) {\n      const radius = Math.hypot(x - start.x, y - start.y);\n      element = {\n        tool: TOOLS.CIRCLE,\n        center: start,\n        radius,\n        color,\n        width: lineWidth\n      };\n    }\n    \n    if (element) {\n      setHistory(prev => [...prev, element]);\n    }\n    \n    setStart(null);\n  };\n\n  const handleUndo = () => {\n    setHistory(prev => prev.slice(0, -1));\n  };\n\n  const handleClear = () => {\n    setHistory([]);\n  };\n\n  return (\n    <div className=\"w-full h-full bg-gray-100 rounded-lg p-4\">\n      <div className=\"mb-4 flex gap-4 items-center\">\n        <input\n          type=\"color\"\n          value={color}\n          onChange={(e) => setColor(e.target.value)}\n          className=\"w-10 h-10 border-none rounded cursor-pointer\"\n        />\n        <input\n          type=\"range\"\n          min=\"1\"\n          max=\"20\"\n          value={lineWidth}\n          onChange={(e) => setLineWidth(Number(e.target.value))}\n          className=\"w-20\"\n        />\n        <button\n          onClick={handleUndo}\n          disabled={history.length === 0}\n          className=\"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50\"\n        >\n          Undo\n        </button>\n        <button\n          onClick={handleClear}\n          className=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600\"\n        >\n          Clear\n        </button>\n      </div>\n      \n      <canvas\n        ref={canvasRef}\n        width={CANVAS_WIDTH}\n        height={CANVAS_HEIGHT}\n        className=\"border border-gray-300 bg-white cursor-crosshair\"\n        onPointerDown={handlePointerDown}\n        onPointerMove={handlePointerMove}\n        onPointerUp={handlePointerUp}\n        onPointerLeave={handlePointerUp}\n      />\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}